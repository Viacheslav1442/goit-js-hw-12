{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '50282426-bcbed3422443d463b1ec5299f';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: PER_PAGE,\n    };\n\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nconst galleryBox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    const markup = images\n        .map(image => {\n            const {\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            } = image;\n            return `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\"><img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/></a>\n        <div class=\"stats\">\n          <p><span>Likes</span><span>${likes}</span></p>\n          <p><span>Views</span><span>${views}</span></p>\n          <p><span>Comments</span><span>${comments}</span></p>\n          <p><span>Downloads</span><span>${downloads}</span></p>\n        </div>\n      </li>\n        `;\n        })\n        .join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    galleryBox.refresh();\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n    loader.style.visibility = 'visible';\n}\n\nexport function hideLoader() {\n    loader.style.visibility = 'hidden';\n}\n\nexport function showLoadMoreButton() {\n    loadMoreBtn.style.visibility = 'visible';\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreBtn.style.visibility = 'hidden';\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    hideLoadMoreButton,\n    showLoadMoreButton,\n} from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query;\nlet page = 1;\nconst perPage = 15;\nlet prevQuery = '';\n\nform.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    hideLoadMoreButton();\n    clearGallery();\n\n    query = e.target.elements['search-text'].value.trim();\n    if (!query) return;\n\n    await showImages(query); // Дочекайся завершення завантаження\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    hideLoadMoreButton();\n\n    await showImages(query); // Дочекайся завантаження\n    scrollView(); // Прокрутка тільки при натисканні кнопки\n});\n\nasync function showImages(query) {\n    if (!query) return;\n\n    showLoader();\n\n    if (prevQuery !== query) {\n        page = 1;\n        prevQuery = query;\n    }\n\n    try {\n        const data = await getImagesByQuery(query, page, perPage);\n        const images = data.hits;\n\n        if (images && images.length > 0) {\n            createGallery(images);\n\n            if (page >= Math.ceil(data.totalHits / perPage)) {\n                iziToast.show({\n                    title: 'ℹ️',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    messageColor: 'white',\n                    titleColor: 'white',\n                    backgroundColor: '#4CAF50',\n                    position: 'topRight',\n                });\n            } else {\n                showLoadMoreButton();\n            }\n        } else {\n            iziToast.show({\n                title: '❌',\n                message: `Sorry, there are no images matching your search query. Please try again!`,\n                messageColor: 'white',\n                titleColor: 'white',\n                backgroundColor: '#ef4040',\n                position: 'topRight',\n            });\n        }\n\n        page++;\n    } catch (err) {\n        console.error(err);\n    } finally {\n        hideLoader();\n    }\n}\n\nfunction scrollView() {\n    const galleryItem = document.querySelector('.gallery-item');\n    if (!galleryItem) return;\n    setTimeout(() => {\n        scrollBy({\n            top: galleryItem.getBoundingClientRect().height * 2,\n            left: 0,\n            behavior: 'smooth',\n        });\n    }, 200);\n}\n"],"names":["API_KEY","BASE_URL","PER_PAGE","getImagesByQuery","query","page","params","axios","gallery","loader","loadMoreBtn","galleryBox","SimpleLightbox","createGallery","images","markup","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","perPage","prevQuery","e","showImages","scrollView","data","iziToast","err","galleryItem"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAW,GAEV,eAAeC,EAAiBC,EAAOC,EAAM,CAChD,MAAMC,EAAS,CACX,IAAKN,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUH,CAClB,EAGI,OADiB,MAAMK,EAAM,IAAIN,EAAU,CAAE,OAAAK,CAAM,CAAE,GACrC,IACpB,CChBA,MAAME,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEjDC,EAAa,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAClB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAASD,EACV,IAAIE,GAAS,CACV,KAAM,CACF,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACH,EAAGP,EACJ,MAAO;AAAA;AAAA,mBAEAE,CAAa,qCAAqCD,CAAY,UAAUE,CAAI;AAAA;AAAA,uCAExDC,CAAK;AAAA,uCACLC,CAAK;AAAA,0CACFC,CAAQ;AAAA,2CACPC,CAAS;AAAA;AAAA;AAAA,SAIpD,CAAS,EACA,KAAK,EAAE,EAEZf,EAAQ,mBAAmB,YAAaO,CAAM,EAE9CJ,EAAW,QAAO,CACtB,CAEO,SAASa,GAAe,CAC3BhB,EAAQ,UAAY,EACxB,CAEO,SAASiB,GAAa,CACzBhB,EAAO,MAAM,WAAa,SAC9B,CAEO,SAASiB,GAAa,CACzBjB,EAAO,MAAM,WAAa,QAC9B,CAEO,SAASkB,GAAqB,CACjCjB,EAAY,MAAM,WAAa,SACnC,CAEO,SAASkB,GAAqB,CACjClB,EAAY,MAAM,WAAa,QACnC,CChDA,MAAMmB,EAAO,SAAS,cAAc,OAAO,EACrCnB,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIN,EACAC,EAAO,EACX,MAAMyB,EAAU,GAChB,IAAIC,EAAY,GAEhBF,EAAK,iBAAiB,SAAU,MAAMG,GAAK,CACvCA,EAAE,eAAc,EAEhBJ,IACAJ,IAEApB,EAAQ4B,EAAE,OAAO,SAAS,aAAa,EAAE,MAAM,OAC1C5B,GAEL,MAAM6B,EAAW7B,CAAK,CAC1B,CAAC,EAEDM,EAAY,iBAAiB,QAAS,SAAY,CAC9CkB,IAEA,MAAMK,EAAW7B,CAAK,EACtB8B,GACJ,CAAC,EAED,eAAeD,EAAW7B,EAAO,CAC7B,GAAKA,EAEL,CAAAqB,IAEIM,IAAc3B,IACdC,EAAO,EACP0B,EAAY3B,GAGhB,GAAI,CACA,MAAM+B,EAAO,MAAMhC,EAAiBC,EAAOC,EAAMyB,CAAO,EAClDhB,EAASqB,EAAK,KAEhBrB,GAAUA,EAAO,OAAS,GAC1BD,EAAcC,CAAM,EAEhBT,GAAQ,KAAK,KAAK8B,EAAK,UAAYL,CAAO,EAC1CM,EAAS,KAAK,CACV,MAAO,KACP,QAAS,6DACT,aAAc,QACd,WAAY,QACZ,gBAAiB,UACjB,SAAU,UAC9B,CAAiB,EAEDT,KAGJS,EAAS,KAAK,CACV,MAAO,IACP,QAAS,2EACT,aAAc,QACd,WAAY,QACZ,gBAAiB,UACjB,SAAU,UAC1B,CAAa,EAGL/B,GACH,OAAQgC,EAAK,CACV,QAAQ,MAAMA,CAAG,CACzB,QAAc,CACNX,GACH,EACL,CAEA,SAASQ,GAAa,CAClB,MAAMI,EAAc,SAAS,cAAc,eAAe,EACrDA,GACL,WAAW,IAAM,CACb,SAAS,CACL,IAAKA,EAAY,sBAAuB,EAAC,OAAS,EAClD,KAAM,EACN,SAAU,QACtB,CAAS,CACJ,EAAE,GAAG,CACV"}